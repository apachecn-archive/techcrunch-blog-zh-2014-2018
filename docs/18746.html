<html>
<head>
<title>How Facebook configures its millions of servers every day | TechCrunch</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">脸书每天是如何配置其数百万台服务器的</h1>
<blockquote>原文：<a href="https://web.archive.org/web/https://techcrunch.com/2018/07/19/how-facebook-configures-its-millions-of-servers-every-day/">https://web.archive.org/web/https://techcrunch.com/2018/07/19/how-facebook-configures-its-millions-of-servers-every-day/</a></blockquote><div><div class="article-content">
				<p id="speakable-summary" class="translated">当你是一家像脸书这样规模的公司，在数百万台服务器上拥有超过 20 亿用户，每天运行数千次配置更改，涉及数万亿次配置检查时，你可以想象，配置是一件大事。与脸书的大多数事情一样，他们面临着很少有公司必须处理的规模问题，并且经常达到仅仅是致命工具的极限。</p>
<p class="translated">为了解决他们的独特问题，该公司开发了一种新的配置交付流程，称为位置感知交付或简称为 LAD。在开发 LAD 之前，该公司一直使用名为 Zoo Keeper 的开源工具来分发配置数据，虽然该工具工作正常，但对于脸书这样规模的公司来说，它有一些相当大的局限性。</p>
<p class="translated">也许其中最大的问题是限制 5 MB 的发行版，一次只能有 2500 个用户。为了让您了解配置是如何工作的，它涉及到以正确的配置实时交付像 Messenger 这样的脸书服务。这可能意味着为一个用户提供英语版本，为另一个用户提供西班牙语版本，所有这一切都是在数百万台服务器上进行的。</p>
<p class="translated">脸书希望创建一个工具来克服这些限制，将数据从分发机制中分离出来，延迟时间不到 5 秒，支持的文件比动物园管理员多 10 倍。哦，是的，它希望所有这些都在数百万个客户端上运行，并处理只有脸书才能带来的疯狂更新率和流量峰值。</p>
<p class="translated">脸书工程团队创造的产品 LAD(不知道道奇队对此作何感想)由几个部分组成:一个代理，位于脸书家族的每台机器上，向任何想要或需要配置文件的机器提供配置文件。第二部分是分发服务器，顾名思义，它提供配置信息。它通过检查新的更新来实现这一点，当它找到它们时，它为一组正在寻找更新的机器创建一个分发树。</p>
<p class="translated">正如脸书的 Ali Haider-Zaveri 在宣布新分发方法的博客文章<a href="https://web.archive.org/web/20230323033817/https://code.fb.com/data-infrastructure/location-aware-distribution-configuring-servers-at-scale/">中所写的，树方法有助于解决脸书在以极限量分发配置更新时面临的许多问题。“通过利用树，LAD 确保更新仅被推送到感兴趣的代理，而不是群组中的所有机器。此外，父机器可以直接向其子机器发送更新，这可以确保根附近的任何一台机器都不会不堪重负，”海德尔-扎维里写道。</a></p>
<p class="translated">至于那些限制，该公司也已经能够克服。他们没有将 5 MB 的更新限制增加到 100 MB，也没有将 2500 个用户限制增加到 40，000 个。</p>
<p class="translated">这样的制度来之不易。它需要测试和再测试，但它今天已经达到了生产水平——至少现在是这样，直到脸书面临另一个挑战，找到一种新的方法来做以前没有人考虑过的事情(因为他们从未达到脸书的规模)。</p>
			</div>

			</div>    
</body>
</html>