# Mixpanel analytics 意外窃取了密码 

> 原文：<https://web.archive.org/web/https://techcrunch.com/2018/02/05/mixpanel-passwords/>

一些使用受流行分析提供商 Mixpanel 监控的网站的人的密码被错误地下载到了它的软件中。在 TechCrunch 调查之前，Mixpanel 除了悄悄给客户发电子邮件反映问题之外，并没有公开宣布这个令人尴尬的错误。然而，一些人需要更新到固定的 Mixpanel SDK，以防止持续的隐私泄露。

目前还不清楚哪些客户因保密协议而受到影响，但 Mixpanel 列出了三星、宝马、Intuit、美国银行和 Fitbit 等一些与之合作的公司。“我们可以告诉你，不到 25%的客户受到了影响，”该公司的发言人告诉我，但他们指出，所有 Mixpanel 项目中大约有 4%受到了隐私漏洞的影响。

Mixpanel 已经在 Andreessen Horowitz 和 Sequoia 等知名投资者的带领下筹集了 7700 万美元。但在 2016 年初，它裁掉了 230 多人团队中的 10%，并一直被昂贵的声誉所困扰。今天的新闻帮不上忙。

![mixpanel in app notifications](img/c30dee235c7473690d6e87e49287d395.png)

密码收集漏洞源于 2017 年 3 月对开源 React JavaScript 库的一次更改，该更改与 2016 年推出的 Mixpanel auto track 功能的工作方式发生了冲突。这导致 Autotrack 以不应该的方式获取隐藏和密码字段的值。“我们没有抓住它，就这么简单，”Mixpanel 首席执行官 Suhail Doshi 告诉我。

这个问题持续了 9 个月，直到 1 月 5 日一位客户提醒 Mixpanel。到 9 日，该公司已经开始过滤和保护意外获得的密码，并销毁了收到的所有密码。2 月 1 日，Mixpanel 向其客户发送了本文末尾的电子邮件，告知他们这个问题。

自动更新其 Mixpanel SDK 或直接从启动时加载的客户端已经获得了修复该问题的补丁。但一些手动更新 Mixpanel SDK 的客户端仍然需要下载新版本来阻止密码的流动。“大约 85%的受影响客户已经更新了他们的 SDK 来解决这个问题。我们正在积极联系尚未更新其 SDK 的剩余客户，”该发言人表示。

同时，“我们已经默认禁用了所有新建项目的自动跟踪。我们将在未来进一步评估 Autotrack 的产品，”这位发言人说，表现出成熟的悔悟。

![mixpanel team](img/45bd27d383fa8c2ca3cfa30574add303.png)

Mixpanel 的团队，大约在 2014 年

该公司在电子邮件中写道:“迄今为止，我们的取证和安全专家没有看到任何迹象表明这些数据被任何 Mixpanel 员工或第三方下载或访问过。”这让人松了一口气，因为 Mixpanel 客户端的个人用户无法知道他们的密码是否被窃取了。尽管如此，最终用户的隐私可能被侵犯的可能性肯定会给 Mixpanel 的客户敲响警钟，他们相信 Mixpanel 可以看到他们的网站和应用程序如何被用来优化性能和盈利。对于谷歌分析、KISSmetrics、Splunk、Flurry 和 Localytics 等竞争对手来说，这个错误可能是一笔意外之财。

越来越依赖 React 这样的开源框架意味着工程和安全团队不能只担心他们公司自己的代码。它必须与开源项目的变更混合在一起，这可能会导致不可预见的麻烦。这就像如果你的一种处方药的成分发生了微妙的变化，那么你首选的非处方药突然引起了危险的相互作用。

来自 Mixpanel 的完整电子邮件如下:

> **2018 年 2 月 1 日发送给客户的邮件:**
> 
> 我们今天给您写信是关于最近在 Mixpanel 平台上发现的数据摄取问题，该问题影响了您的项目，并要求您尽快更新您的 SDK(除非您的 SDK 设置为自动更新)。在我们详细介绍发生了什么以及我们如何解决该问题之前，我们想对这可能给贵组织带来的任何困难表示歉意。我们的团队致力于迅速纠正这种情况，我们随时准备讨论任何问题或顾虑，只需回复此电子邮件，我们将保持联系。
> 
> 发生了什么事？
> 
> 2018 年 1 月 5 日，一位客户告知我们，他们观察到 Autotrack 在事件中发送密码字段的值。我们证实了这是一种意想不到的行为；根据设计，Autotrack 不应该发送隐藏和密码表单字段的值。
> 
> 我们立即开始进一步调查，并了解到客户观察到的行为是由于 2017 年 3 月对 React JavaScript 库所做的更改。这一变化将隐藏字段和密码字段的值的副本放入输入元素的属性中，然后 Autotrack 无意中收到了这些属性。经过进一步调查，我们意识到，由于我们在 2016 年 8 月推出 Autotrack 时就已经采用了这种方式，这种情况也可能发生在浏览器插件(例如 1Password 密码管理器)和网站框架将敏感数据放入表单元素属性的其他场景中。
> 
> 到目前为止，我们的取证和安全专家尚未发现任何迹象表明此数据被任何 Mixpanel 员工或第三方下载或访问。这是一个错误，简单明了。一经发现，我们立即采取措施保护数据安全，并停止进一步接收。截至今天，无意中收到的所有数据都已销毁。为了尽可能透明，以下是我们如何解决并将继续解决这一问题的更多细节。
> 
> 我们如何解决这个问题
> 
> 自 discovery 以来，我们一直在积极为受影响的客户解决该问题。大多数项目未受影响，但根据我们的调查结果，我们认为您可能有受影响的项目，我们在此电子邮件末尾列出了这些项目。
> 
> 当我们发现此数据摄取问题时，立即采取了以下形式的措施:
> 
> 1.  限制数据的进一步接收:1 月 9 日，我们实施了一个服务器端过滤器，一旦我们接收到数据，就安全地丢弃它，然后很快改进过滤器，以解决最后剩余的边缘情况。
>     
>     
> 2.  删除无意中收到的数据:我们已清除了数据库中所有无意中收到的数据，并可根据要求向您提供关于哪些数据被无意中发送到 Mixpanel 服务器的细粒度元数据。这将包括将不同的 id 映射到属性名称(而不是数据值本身，这些数据值已经使用适当的安全措施安全地删除)。
>     
>     
> 3.  修正自动追踪错误:我们已经在混合面板 SDK 中实现了自动追踪功能修正。但是，您需要尽快更新您的 SDK，以反映这一变化。如果您的 SDK 设置为自动更新，或者如果您的网站直接从我们的内容服务器加载 SDK，则不需要采取任何操作。
>     
>     
> 4.  查看对此数据的任何访问权限:我们认为此数据未被任何 Mixpanel 员工或第三方下载或访问。如果我们发现有其他情况，我们将立即通知您。
>     
>     
> 
> 除了解决这个问题的根本原因之外，我们还采取了积极的措施来识别和防止将来出现类似的问题:
> 
> 1.  将正式的隐私审查纳入我们的设计和开发流程:安全性和隐私一直是 Mixpanel 的首要考虑因素，但我们在产品开发流程中增加了一些额外的明确检查点，以帮助确保我们考虑了我们所做更改的所有影响。
>     
>     
> 2.  对现有关键产品领域进行深入的安全/隐私审计:我们从这个问题中学到了很多，我们的团队一直在寻找可能出现相同问题的类似案例。
>     
>     
> 3.  操作我们的响应工具:我们已经建立了新的工具来响应这个问题，以帮助我们确定数据收集的范围，限制对数据的访问，并将其从我们的系统中快速清除。我们正在使用这些工具，并使它们更通用，以便在未来发生类似问题时，我们能够更快地做出反应。
>     
>     
> 4.  数据过滤和检测:我们正在探索能够更快检测到这种情况的功能，包括对 SDK 的更改，以让我们更深入地了解发送给我们的数据，与数据丢失预防(DLP)解决方案的集成，甚至使用我们的机器学习功能来检测异常摄取。
>     
>     
> 
> 我们正在对发生的事情以及我们是如何处理的进行彻底的调查。我们相信，作为您值得信赖的合作伙伴，我们已经以所需的速度和准确性解决了摄入问题。在签名下方，我们还列出了您受影响的项目 ID 和项目名称。
> 
> 如果您有任何问题或需要更多信息，请回复此电子邮件，以便您的客户团队做出回复。否则，如前所述，请尽快更新您的 SDK。
> 
> 真诚地
> 
> Mixpanel 安全团队